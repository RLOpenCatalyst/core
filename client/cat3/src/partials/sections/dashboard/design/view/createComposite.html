<!--for showing existing blueprints-->
<div ng-controller="createCompositeCtrl as createCBP">
    <div id="well" class="well well-sm">
        <div class="col-lg-8 col-md-8">
            Composite Blueprint:
        </div>
        <div class="col-lg-4 col-md-4 pull-right" >
            <button type="button" class="btn btn-xs cat-btn-update ng-scope pull-right margin-left6" ng-click="isOpenSidebar = !isOpenSidebar">
                <i class="fa fa-filter fa-2 white" aria-hidden="true"></i>&nbsp;Filter
            </button>
        </div>
    </div>
    <div id="sidebar-wrapper" ng-class="{'show-wrapper':isOpenSidebar === true}">
        <form>
            <fieldset class="repo-job-details-wrapper">
                <legend class="repo-job-details-wrapper-inner">Filter:</legend>
                <div class="col-lg-12 ">
                    <div class="col-lg-12 col-md-12 form-group">
                        <label for="">Business Group</label>
                        <select id="bgListInputExisting" class="chooseBGExisting width-100 form-control"  ng-model="organNewEnt.buss">
                            <option ng-repeat="buss in organObject[organNewEnt.org].businessGroups" value="{{organObject[organNewEnt.org].businessGroups.indexOf(buss)}}" >{{buss.name}}</option>
                        </select>
                    </div>
                    <div class="col-lg-12 col-md-12 form-group">
                        <label >Project</label>
                        <select class="chooseProjectExisting width-100 form-control" ng-model="organNewEnt.proj">
                            <option ng-repeat="proj in organObject[organNewEnt.org].businessGroups[organNewEnt.buss].projects"  value="{{organObject[organNewEnt.org].businessGroups[organNewEnt.buss].projects.indexOf(proj)}}" >{{proj.name}}</option>
                        </select>
                    </div>
                    <div class="col-lg-12 col-md-12 form-group">
                        <button type="button" class="btn btn-primary"  ng-click="createCBP.createList();"><i class="fa fa-filter fa-2 white" aria-hidden="true"></i>&nbsp;Apply</button>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>

<br>
<fieldset id="compBlueprint" class="repo-job-details-wrapper" >

    <div class="form-group">
        <label class="control-label col-sm-2 labelHorizontal" for="blueprintNameInputComposite">Enter Blueprint Name<span class=" red">&nbsp;*</span></label>
        <div class="col-sm-8 blueprintName"> <input ng-model="createCBP.newEnt.bpName" type="text" name="coBlueprintName"  class="required form-control"  required style="width: 60%;" />
            <span class="error red" ng-show="createCBP.onSubmit && compositeBlueprintCreation.coBlueprintName.$invalid"> Please enter Composite Blueprint name!</span>
        </div>
    </div>
    <div style="clear: both;"></div>
   <br />
    <div id="compositeDivision" class="margin-top5">
        <div id="compositeBlueprintLoadBlueprint">
            <div id="compositeBlueprintSelector" >
                <div class="col-lg-6 col-md-6 col-sm-12">
                    <div class="panel-group">
                        <div class="panel panel-default">
                            <div class="panel-heading" style="height: 40px;">
                                <div class="search">
                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                        <label for="search-input"><i class="fa fa-search" aria-hidden="true"></i><span class="sr-only">Search</span></label>
                                        <input ng-model="searchText.name" class="search-input" class="form-control input-lg" placeholder="Search" autocomplete="off" spellcheck="false" autocorrect="off" tabindex="1">
                                        <a id="search-clear" href="#" class="fa fa-times-circle hide" aria-hidden="true"><span class="sr-only">Clear search</span></a>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6">&nbsp;
                                        <select class="form-control bp-select pull-right" ng-change="createCBP.createList();" ng-model="createCBP.compositeBPType">
                                            <option value="chef" >SoftwareStack </option>
                                            <option value="docker">Docker</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-body bp-panel-body">
                                <span class="red" ng-if=" createCBP.ExBlueprintList.length === 0 && createCBP.SelectedBPList.length === 0">No Data Found!</span>
                                <ul class="list-group" ui-sortable>
                                    <li class="list-group-item" ng-repeat="bp in createCBP.ExBlueprintList | filter :searchText">
                                        <span class="badge cat-btn-update" ng-click="createCBP.addBP(createCBP.ExBlueprintList.indexOf(bp))" ><i class="fa fa-arrow-right white fa-2" aria-hidden="true"></i></span>
                                        <span class="badge cat-btn-update" ng-click="createCBP.selectBpInfo($event,bp)" ><i class="fa fa-info fa-2 white" aria-hidden="true"></i></span>
                                        <img src="./images/rsz_layers.png" alt="Zabix and Logstash"> &nbsp;{{bp.name}}
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12">
                    <div class="panel-group">
                        <div class="panel panel-default">
                            <div class="panel-heading" style="height: 40px;">
                                <input type="hidden" ng-model="createCBP.newEnt.blueprintIds" >
                               <span>Selected Blueprints</span> &nbsp; <span class="error red" ng-show="createCBP.onSubmit && createCBP.SelectedBPList.length <= 0">Please select blueprint.</span>
                            </div>
                            <div class="panel-body bp-panel-body">
                                <ul class="list-group" dnd-list="createCBP.SelectedBPList" >
                                    <li class="list-group-item bpListComp"  ng-repeat="selectedp in createCBP.SelectedBPList" dnd-draggable="selectedp"
                                        dnd-moved="createCBP.SelectedBPList.splice($index, 1)"
                                        dnd-effect-allowed="move"
                                        dnd-selected="models.selected = selectedp"  ng-class=" {'activeLi':createCBP.selectBlueprintId === selectedp._id}">
                                        <span class="badge cat-btn-update" ng-click="createCBP.editSelectBpInfo($event,selectedp)" ><i class="fa fa-pencil-square-o fa-2 white" aria-hidden="true"></i></span>
                                        <span class="badge cat-btn-update" ng-click="createCBP.selectBpInfo($event,selectedp)" ><i class="fa fa-info fa-2 white" aria-hidden="true"></i></span>
                                        <span class="badge cat-btn-update" ng-click="createCBP.deSelect($event,createCBP.SelectedBPList.indexOf(selectedp))" ><i class="fa fa-arrow-left fa-2 white" aria-hidden="true"></i></span>
                                        <span class="badge pull-left" >{{(+createCBP.SelectedBPList.indexOf(selectedp)) +1}}</span><img src="./images/rsz_layers.png" alt="Zabix and Logstash"> &nbsp;{{selectedp.name}}
                                    </li>
                                </ul>
                                
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <div style="clear: both;"></div>
    <!--for showing no blueprints available-->
    <label id="npbpmsgComposite" class="npbpmsg hidden">No blueprints found</label>
    <!--edit attribute-->
    <div class="col-lg-12" ng-show="createCBP.SelectedBPList.length >0 && createCBP.selectBlueprintId">
        <accordion>
                <accordion-group ng-init="accGroupStatus = {opened: false}" is-open="accGroupStatus.opened">
                    <accordion-heading>
                        <i class="fa fa-fw" ng-class="{'fa-minus-circle red':accGroupStatus.opened,'fa-plus-circle':!accGroupStatus.opened }"></i>
                        Edit attribute of Composed Roles and Cookbooks
                    </accordion-heading>
                    <div class="panel-body" id="attributeRunlistTable">
                        <div class="col-lg-8 col-md-8 marginTop19">
                            <label>
                                <i class="ace-icon fa fa-list-ul"></i>
                                Runlist
                            </label>
                            <div style="height:146px;overflow-y:auto; overflow-x:hidden;" id="dbNameTable_wrapper" class="dataTables_wrapper no-footer">
                                <div class="dataTables_wrapper no-footer">
                                    <div  class="dataTables_wrapper no-footer">
                                        <table class="table table-striped table-bordered table-hover dataTable no-footer" cellpadding="5px" width="100%" role="grid" style="width: 100%;">
                                        <thead>
                                            <tr class="rowCustomStyle" role="row">
                                                <th class="sorting_disabled" rowspan="1" colspan="1" style="width: 395px;">View Runlist</th>
                                                <th class="sorting_disabled" rowspan="1" colspan="1" style="width: 395px;">Cookbook Attributes</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="runlistRow" ng-if="createCBP.selectedBPDetails.blueprintConfig.infraManagerData.versionsList.length === 0">
                                                <td collapse="2">No data available</td>
                                            </tr>
                                            <tr class="runlistRow" ng-repeat="(key,value) in createCBP.selectedBPDetails.blueprintConfig.infraManagerData.versionsList[0].runlist">
                                                <td>{{value}}</td>
                                                <td>
                                                    <span title="edit" class="badge cat-btn-update" ng-click="createCBP.editSelectBpInfo($event,selectedp)" ><i class="fa fa-pencil-square-o fa-2 white" aria-hidden="true"></i></span>
                                                    <span title="view" class="badge cat-btn-update" ng-click="createCBP.editSelectBpInfo($event,selectedp)" ><i class="fa fa-info fa-2 white" aria-hidden="true"></i></span></td>
                                            </tr>
                                        </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </accordion-group>
        </accordion>
    </div>
</fieldset>
</div>
<style>
    .pager{
       margin: 0 !important;
    }
</style>