<script>
//   $(".tree-view").hide();
   
</script>
<div class="row">
   <div class="col-md-12">
      <div class="col-md-12">
        <form action="" id="myForm3">
         <div class="widget-box">
            <div class="widget-header">
               <h4 class="widget-margin" style="color:black;">Create Team</h4>
            </div>
            <div class="widget-body">
               <div class="widget-main widgetHeight">
                  <div>
                     <section id="widget-grid" class="">
                        <!-- START ROW -->
                        <div class="row">
                           <!-- NEW COL START -->
                           <!-- Widget ID (each widget will need unique ID)-->
                           <div class="jarviswidget" id="wid-id-3" data-widget-editbutton="false" data-widget-custombutton="false">
                              <!-- widget div-->
                              <div>
                                 <!-- widget content -->
                                 <div class="widget-body no-padding">
                                  <div class="col-lg-12 ipLEFT">
                                  <div class="col-lg-6 col-md-6 ipWidth">
                                          <label for="name">Name:<span class="control-label redSpan">&nbsp;*</span></label>
                                          <label id="msgOrgName" style="display:none;color:red;float:right;">Required</label>
                                          <br>
                                          <input autofocus name="ctl00$MainContent$orgname" value="" id="teamname" class="form-control" type="text"  cdata="catalyst" cat-validation="required,nospecial,max22,nospace"  unique="true"  uniqueconditionedby="teamname">
                                       </div>
                                       </div>
                                       <div class="col-lg-6 col-md-6 projectRepo">
                                          <label for="name">Description:</label>
                                          <input name="ctl00$MainContent$orgname" value="" id="description" class="form-control" type="text"  cdata="catalyst" maxlength="50">
                                       </div>
                                  <div class="col-lg-6 col-md-6 projectRepo">
                                          <label for="">Organization:<span class="control-label redSpan">&nbsp;*</span></label>
                                          <select id="orgname" class="chooseOrganization width-100" sourcepath="1" datapath="masterjson.rows.row" linkedfields="['projectname','loginname']"  cdata="catalyst" cat-validation="required">
                                             <option value="">Select Organization</option>
                                          </select>
                                       </div>
                                    
                                 <div class="col-lg-6 col-md-6 smart-form"  style="margin-top:25px;">
                                    <label for="category">Users:</label>
                                    <div  id="loginname" multiselect="multiselect" datatype="select" datapath="masterjson.rows.row"  class="input-group from-control col-md-12" style="height:150px;overflow-y:auto;padding:2px;border:1px solid silver;width:100%" sourcepath="7" cdata="catalyst" linkedto="orgname">
                                    </div>
                                 </div>
                                 <div class="col-lg-6 col-md-6 smart-form" style="margin-top:25px;">
                                    <label for="category">Assign Projects:</label>
                                    <div  id="projectname" sourcepath="4" multiselect="multiselect" datatype="select" datapath="masterjson.rows.row"  class="input-group from-control col-md-12" style="height:150px;overflow-y:auto;padding:2px;border:1px solid silver;width:100%" cdata="catalyst" linkedto="orgname" >
                                    </div>
                                 </div>
                                 <!-- <div class="col-lg-6 col-md-6 smart-form" style="margin-top:25px;">
                                 <label for="category">Environments:</label>
                                    <div  id="environmentname" multiselect="multiselect" datatype="select" sourcepath="3" datapath="masterjson.rows.row"  linkedto="orgname" class="input-group from-control col-md-12 widthBox" cdata="catalyst">
                                    </div>
                                 </div> -->

                                 
                                 <!-- end widget content -->
                                 </div>
                              </div>
                              <!-- end widget div -->
                           </div>
                           <!-- end widget -->             
                        </div>
                        <!-- END ROW -->
                     </section>
                     <!-- end widget grid -->
                  </div>
               </div>
            </div><!--widget body ends-->
            <div class="widget-toolbox clearfix">
               <div class="btn-group pull-right">
                <a class="btn btn-default" onclick="window.history.back();" style="margin-right:11px;" id="btncancel">
                  <i class="ace-icon fa fa-times bigger-110"></i>
                  Cancel
                  </a>
                  <button class="btn btn-primary btn-mini">
                  <i class="ace-icon fa fa-check bigger-110"></i>
                  Save
                  </button>
                  
               </div>
            </div>
         </div>
         </form>
      </div>
   </div>
</div>
<script>
   //Form Name
   $(document).ready(function() {
       $(".chooseOrganization").select2();
       $(".chooseBG").select2();
       //isUserTypeSuperAdmin();

/*function getTemplate(val,name){
          return '<label class="toggle font-sm" style="padding-left:4px;"><input onclick="if($(this).is(&quot;:checked&quot;)) {$(this).closest(&quot;label&quot;).'+
          'css(&quot;background-color&quot;,&quot;#eeeeee&quot;);$(this).css(&quot;border-color&quot;,&quot;#3b9ff3&quot;);}else{$(this).closest(&quot;label&quot;).css(&quot;background-color&quot;,&quot;#ffffff&quot;);$(this).css(&quot;border-'+
            'color&quot;,&quot;red&quot;);}" type="checkbox" name="checkbox-toggle" value="'+val+'" style="width:100%"><i data-swchoff-text="NO" data-swchon-text="YES"></i>'+name+'</label>';
    }*/
     /*   $('#orgname').on('change',function(e){
    var val=$('#orgname').find('option:selected').attr('rowid');
   // alert(val);
    if(val){
    $.get('/d4dMasters/orgs/'+val+'/projects/all',function(data){
        $('#projectname').html('');
      var str='';
      for(var i=0;i<data.length;i++){
       // alert(data[i].projectname);
       str=str+getTemplate(data[i].rowid,data[i].projectname);
      }
      $('#projectname').html(str);
    });
    }
    else{
      $('#projectname').html('');
    }
   });*/
   
   });
   

   function isUserTypeSuperAdmin(){
    $.get('/d4dMasters/loggedInUser',function(data){
      if(!data.isSuperAdmin){
      $('#orgname').attr('disabled','disabled').select2();
      }
    });
  }
   function inLineReady() {
       $("input[type='text']").on("click", function () {
           $(this).select();
           $("#msgOrgName").hide();
       });
       readform(21);
       //Force opening the left navigation menu
       if ($('#navSettings').is(":visible") == false) {
           $('#navSettings').css("display", '');
           $('#navSettings > ul > li').first().addClass('open');
           $('#navSettings > ul > li > ul').css("display", "none");
           $('#navSettings > ul > li > ul').first().css("display", "block");
       }
       //redrawing the breadcrumb and selecting the tree
       $('#ulsettingstree > li').removeClass('active');
       $('#ulsettingstree > li').each(function () {
           if ($(this).text().trim() == "Projects")
               $(this).addClass('active');
       });
       drawBreadCrumb1();
       enableUniqueCheckingForInputs(21);
   }
   
   
   $.fn.getType = function () {
     if($(this).length){
        return this[0].tagName == "INPUT" ? this[0].type.toLowerCase() : this[0].tagName.toLowerCase();
      }else{
        return "undefined";
      }
     }
   
   
   function validateForm() {
       //Check for required parameter
    
       return (true);
   }
   
      
   $("#id-input-file-2").change(function () {
       readURL(this);
       $(".ace-file-name").attr('data-title', '');
       $(".ace-file-name").html('<i class=" ace-icon fa fa-upload"></i>' + this.files[0].name);
   
   });
   
   
   inLineReady();
   
   function getSettingsNavFor(orgName) {
   var getBG = getRelatedValues(2, "orgname", orgName, "productgroupname");
   var getEnv = getRelatedValues(3, "orgname", orgName, "environmentname");
   var getProj = getRelatedValues(4, "orgname", orgName, "projectname");
   var retJson = { "Business Group": getBG, "Environments": getEnv, "Projects": getProj };
   return (retJson);
   
   }
</script>
<script>
   $(document).ready(function () {
      $("#teamname").focus();
       $('#myForm3').submit(function() {
           $(this).validate();
   
           if($(this).valid){
                /*alert('valid form submitted'); // for demo*/
               if(!saveform('21'))return false;;
           }else{
                alert('invalid valid form submitted'); // for demo
           }
           return false; // for demo
       });
   });
       
</script>
